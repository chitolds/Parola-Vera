<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Secret - Web App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #FFB800 0%, #FF9500 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 600px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .setup-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        label {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
            min-width: 150px;
        }

        input[type="number"] {
            flex: 1;
            padding: 12px;
            border: 2px solid #FFB800;
            border-radius: 8px;
            font-size: 1.1em;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #FF9500;
            box-shadow: 0 0 10px rgba(255, 184, 0, 0.3);
        }

        button {
            padding: 12px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-start {
            background: linear-gradient(135deg, #FFB800 0%, #FF9500 100%);
            color: white;
            width: 100%;
            margin-top: 10px;
            padding: 15px;
            font-size: 1.2em;
        }

        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 184, 0, 0.3);
        }

        .btn-start:active {
            transform: translateY(0);
        }

        .game-section {
            display: none;
            text-align: center;
        }

        .game-section.active {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .round-counter {
            background: #FFF3E0;
            padding: 10px;
            border-radius: 8px;
            color: #E65100;
            font-weight: bold;
        }

        .stats {
            background: #FFE0B2;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.95em;
            color: #D84315;
            text-align: left;
        }

        .stats p {
            margin: 5px 0;
        }

        .card-display {
            background: linear-gradient(135deg, #FFB800 0%, #FF9500 100%);
            color: white;
            padding: 60px 30px;
            border-radius: 15px;
            font-size: 2em;
            font-weight: bold;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            word-wrap: break-word;
            line-height: 1.4;
        }

        .card-display.hidden {
            display: none;
        }

        .btn-view-card {
            background: #4CAF50;
            color: white;
            font-size: 1.2em;
            padding: 15px;
            width: 100%;
            display: block;
        }

        .btn-view-card:hover {
            background: #45a049;
        }

        .btn-view-card.hidden {
            display: none;
        }

        .btn-next {
            background: #2196F3;
            color: white;
            font-size: 1.1em;
            padding: 12px;
            width: 100%;
            display: none;
        }

        .btn-next:hover {
            background: #0b7dda;
        }

        .btn-next.show {
            display: block;
        }

        .end-game-section {
            margin-top: 20px;
            padding: 20px;
            background: #fff3cd;
            border-radius: 8px;
            border: 2px solid #ffc107;
            display: none;
        }

        .end-game-section.show {
            display: block;
        }

        .btn-check-password {
            background: #ff9800;
            color: white;
            font-size: 1.1em;
            padding: 12px;
            width: 100%;
            margin-bottom: 15px;
            display: block;
        }

        .btn-check-password:hover {
            background: #e68900;
        }

        .btn-check-password.hidden {
            display: none;
        }

        .btn-hide-password {
            background: #757575;
            color: white;
            font-size: 1.1em;
            padding: 12px;
            width: 100%;
            margin-bottom: 15px;
            display: none;
        }

        .btn-hide-password:hover {
            background: #616161;
        }

        .btn-hide-password.show {
            display: block;
        }

        .password-reveal {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 1.5em;
            font-weight: bold;
            color: #2e7d32;
        }

        .btn-new-game {
            background: #f44336;
            color: white;
            font-size: 1.1em;
            padding: 12px;
            width: 100%;
        }

        .btn-new-game:hover {
            background: #da190b;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üïµÔ∏è Little Secret</h1>

        <!-- Setup Section -->
        <div class="setup-section" id="setupSection">
            <div class="input-group">
                <label for="numPlayers">Numero di giocatori:</label>
                <input type="number" id="numPlayers" min="5" max="12" value="5">
            </div>
            <button class="btn-start" onclick="startGame()">Inizia Partita</button>
            <div style="font-size: 0.9em; color: #666; text-align: center;">
                Giocatori consentiti: 5-12
            </div>
        </div>

        <!-- Game Section -->
        <div class="game-section" id="gameSection">
            <div class="round-counter" id="roundCounter"></div>

            <div class="stats" id="gameStats"></div>

            <div class="card-display hidden" id="cardDisplay">
                Premi il bottone sottostante per vedere la tua carta
            </div>

            <button class="btn-view-card" id="btnViewCard" onclick="viewCard()">Vedi la tua carta</button>

            <button class="btn-next" id="btnNext" onclick="nextPlayer()">Passa al prossimo giocatore</button>

            <!-- End Game Section -->
            <div class="end-game-section" id="endGameSection">
                <h3>Giro Completato</h3>
                <button class="btn-check-password" id="btnCheckPassword" onclick="checkPassword()">Verifica la parola vera</button>
                <button class="btn-hide-password" id="btnHidePassword" onclick="hidePassword()">Nascondi la parola</button>
                <div id="passwordReveal"></div>
                <button class="btn-new-game" onclick="resetGame()">Nuova Partita</button>
            </div>
        </div>

        <div id="errorMessage"></div>
    </div>

    <script>
        // 112 combinazioni di parole
        const wordPairs = [
            { discepolo: "Marzo", infiltrato: "Aprile" },
            { discepolo: "Panna", infiltrato: "Latte" },
            { discepolo: "Coccodrillo", infiltrato: "Lucertola" },
            { discepolo: "Spogliatoio", infiltrato: "Palestra" },
            { discepolo: "Grattacielo", infiltrato: "Palazzo" },
            { discepolo: "Metro", infiltrato: "Autobus" },
            { discepolo: "Taxi", infiltrato: "Limousine" },
            { discepolo: "Torre Eiffel", infiltrato: "Arco di Trionfo" },
            { discepolo: "Baguette", infiltrato: "Pane" },
            { discepolo: "Vino", infiltrato: "Birra" },
            { discepolo: "Templi", infiltrato: "Santuari" },
            { discepolo: "Sushi", infiltrato: "Sashimi" },
            { discepolo: "Sakura", infiltrato: "Orchidea" },
            { discepolo: "Colosseo", infiltrato: "Forum" },
            { discepolo: "Fontana di Trevi", infiltrato: "Obelisco" },
            { discepolo: "Gladiatore", infiltrato: "Soldato" },
            { discepolo: "Big Ben", infiltrato: "Clock Tower" },
            { discepolo: "Londra", infiltrato: "Manchester" },
            { discepolo: "T√®", infiltrato: "Caff√®" },
            { discepolo: "Gondola", infiltrato: "Barca" },
            { discepolo: "Mela", infiltrato: "Pera" },
            { discepolo: "Gatto", infiltrato: "Cane" },
            { discepolo: "Libro", infiltrato: "Giornale" },
            { discepolo: "Sole", infiltrato: "Luna" },
            { discepolo: "Montagna", infiltrato: "Collina" },
            { discepolo: "Mare", infiltrato: "Oceano" },
            { discepolo: "Stella", infiltrato: "Pianeta" },
            { discepolo: "Fiore", infiltrato: "Erba" },
            { discepolo: "Albero", infiltrato: "Cespuglio" },
            { discepolo: "Fuoco", infiltrato: "Fiamma" },
            { discepolo: "Acqua", infiltrato: "Ghiaccio" },
            { discepolo: "Vento", infiltrato: "Brezza" },
            { discepolo: "Pioggia", infiltrato: "Neve" },
            { discepolo: "Arcobaleno", infiltrato: "Nuvola" },
            { discepolo: "Temporale", infiltrato: "Fulmine" },
            { discepolo: "Tuono", infiltrato: "Lampo" },
            { discepolo: "Nebbia", infiltrato: "Rugiada" },
            { discepolo: "Brina", infiltrato: "Ghiaccio" },
            { discepolo: "Sauna", infiltrato: "Bagno Turco" },
            { discepolo: "Piscina", infiltrato: "Lago" },
            { discepolo: "Fiume", infiltrato: "Ruscello" },
            { discepolo: "Cascata", infiltrato: "Torrente" },
            { discepolo: "Pozzo", infiltrato: "Sorgente" },
            { discepolo: "Fonte", infiltrato: "Fontanella" },
            { discepolo: "Sorgente", infiltrato: "Confluenza" },
            { discepolo: "Palude", infiltrato: "Acquitrino" },
            { discepolo: "Deserto", infiltrato: "Savana" },
            { discepolo: "Prateria", infiltrato: "Steppe" },
            { discepolo: "Foresta", infiltrato: "Giungla" },
            { discepolo: "Bosco", infiltrato: "Macchia" },
            { discepolo: "Tundra", infiltrato: "Arcipelago" },
            { discepolo: "Isola", infiltrato: "Continente" },
            { discepolo: "Baia", infiltrato: "Golfo" },
            { discepolo: "Insenatura", infiltrato: "Porto" },
            { discepolo: "Spiaggia", infiltrato: "Riva" },
            { discepolo: "Costa", infiltrato: "Litorale" },
            { discepolo: "Scogliera", infiltrato: "Promontorio" },
            { discepolo: "Caverna", infiltrato: "Grotta" },
            { discepolo: "Voragine", infiltrato: "Abisso" },
            { discepolo: "Burrone", infiltrato: "Canyon" },
            { discepolo: "Valle", infiltrato: "Vetta" },
            { discepolo: "Picco", infiltrato: "Cima" },
            { discepolo: "Pendio", infiltrato: "Fianco" },
            { discepolo: "Terrazza", infiltrato: "Balcone" },
            { discepolo: "Finestra", infiltrato: "Porta" },
            { discepolo: "Tetto", infiltrato: "Fondamenta" },
            { discepolo: "Muro", infiltrato: "Parete" },
            { discepolo: "Ponte", infiltrato: "Viadotto" },
            { discepolo: "Strada", infiltrato: "Via" },
            { discepolo: "Vicolo", infiltrato: "Piazza" },
            { discepolo: "Parco", infiltrato: "Giardino" },
            { discepolo: "Orto", infiltrato: "Frutteto" },
            { discepolo: "Vigna", infiltrato: "Campo" },
            { discepolo: "Fattoria", infiltrato: "Allevamento" },
            { discepolo: "Stalla", infiltrato: "Porcile" },
            { discepolo: "Pollaio", infiltrato: "Ovile" },
            { discepolo: "Fienile", infiltrato: "Granaio" },
            { discepolo: "Mulino", infiltrato: "Fornace" },
            { discepolo: "Fucina", infiltrato: "Officina" },
            { discepolo: "Laboratorio", infiltrato: "Fabbrica" },
            { discepolo: "Cantiere", infiltrato: "Stabilimento" },
            { discepolo: "Magazzino", infiltrato: "Deposito" },
            { discepolo: "Granero", infiltrato: "Silos" },
            { discepolo: "Frigorifero", infiltrato: "Congelatore" },
            { discepolo: "Forno", infiltrato: "Stufa" },
            { discepolo: "Cucina", infiltrato: "Dispensa" },
            { discepolo: "Tavolo", infiltrato: "Sedia" },
            { discepolo: "Letto", infiltrato: "Divano" },
            { discepolo: "Armadio", infiltrato: "Cassettone" },
            { discepolo: "Scrivania", infiltrato: "Banco" },
            { discepolo: "Libreria", infiltrato: "Scaffale" },
            { discepolo: "Quadro", infiltrato: "Specchio" },
            { discepolo: "Tappeto", infiltrato: "Tenda" },
            { discepolo: "Lampada", infiltrato: "Candela" },
            { discepolo: "Orologio", infiltrato: "Calendario" },
            { discepolo: "Radio", infiltrato: "Televisione" },
            { discepolo: "Telefono", infiltrato: "Computer" },
            { discepolo: "Tastiera", infiltrato: "Mouse" },
            { discepolo: "Stampante", infiltrato: "Scanner" },
            { discepolo: "Fotocamera", infiltrato: "Videocamera" },
            { discepolo: "Binocolo", infiltrato: "Telescopio" },
            { discepolo: "Microscopio", infiltrato: "Lente" },
            { discepolo: "Termometro", infiltrato: "Barometro" },
            { discepolo: "Bussola", infiltrato: "Mappa" },
            { discepolo: "Globo", infiltrato: "Atlante" },
            { discepolo: "Bicicletta", infiltrato: "Motocicletta" },
            { discepolo: "Automobile", infiltrato: "Camion" },
            { discepolo: "Treno", infiltrato: "Aereo" },
            { discepolo: "Nave", infiltrato: "Barca" },
            { discepolo: "Elicottero", infiltrato: "Drago" },
            { discepolo: "Razzo", infiltrato: "Satellite" },
            { discepolo: "Paracadute", infiltrato: "Vela" }
        ];

        // Configurazione per numero di giocatori
        const gameConfig = {
            5: { discepoli: 3, infiltrati: 1, giornalisti: 1 },
            6: { discepoli: 4, infiltrati: 1, giornalisti: 1 },
            7: { discepoli: 4, infiltrati: 2, giornalisti: 1 },
            8: { discepoli: 5, infiltrati: 2, giornalisti: 1 },
            9: { discepoli: 5, infiltrati: 3, giornalisti: 1 },
            10: { discepoli: 6, infiltrati: 3, giornalisti: 1 },
            11: { discepoli: 6, infiltrati: 3, giornalisti: 2 },
            12: { discepoli: 7, infiltrati: 3, giornalisti: 2 }
        };

        let gameState = {
            numPlayers: 0,
            cards: [],
            currentPlayer: 0,
            selectedWordPair: null,
            cardRevealed: false,
            truePassword: null,
            passwordRevealed: false
        };

        function startGame() {
            const numPlayers = parseInt(document.getElementById('numPlayers').value);

            if (isNaN(numPlayers) || numPlayers < 5 || numPlayers > 12) {
                showError('Inserisci un numero tra 5 e 12!');
                return;
            }

            gameState.numPlayers = numPlayers;
            gameState.currentPlayer = 0;
            gameState.cardRevealed = false;
            gameState.passwordRevealed = false;

            // Seleziona una parola casuale
            gameState.selectedWordPair = wordPairs[Math.floor(Math.random() * wordPairs.length)];
            gameState.truePassword = gameState.selectedWordPair.discepolo;

            // Genera le carte
            generateCards(numPlayers);

            // Mostra la sezione di gioco
            document.getElementById('setupSection').style.display = 'none';
            document.getElementById('gameSection').classList.add('active');

            updateUI();
        }

        function generateCards(numPlayers) {
            const config = gameConfig[numPlayers];
            gameState.cards = [];

            // Crea array di ruoli
            let roles = [];

            // Aggiungi Discepoli
            for (let i = 0; i < config.discepoli; i++) {
                roles.push({ role: 'discepolo', word: gameState.selectedWordPair.discepolo });
            }

            // Aggiungi Infiltrati
            for (let i = 0; i < config.infiltrati; i++) {
                roles.push({ role: 'infiltrato', word: gameState.selectedWordPair.infiltrato });
            }

            // Aggiungi Giornalisti
            for (let i = 0; i < config.giornalisti; i++) {
                roles.push({ role: 'giornalista', word: 'GIORNALISTA' });
            }

            // Mischia i ruoli in ordine randomico
            roles = roles.sort(() => Math.random() - 0.5);

            gameState.cards = roles;
        }

        function viewCard() {
            const cardDisplay = document.getElementById('cardDisplay');
            const btnViewCard = document.getElementById('btnViewCard');
            const btnNext = document.getElementById('btnNext');

            if (!gameState.cardRevealed) {
                // Mostra la carta
                const card = gameState.cards[gameState.currentPlayer];
                cardDisplay.textContent = card.word;
                cardDisplay.classList.remove('hidden');
                gameState.cardRevealed = true;
                btnViewCard.classList.add('hidden');
                btnNext.classList.add('show');
            } else {
                // Nascondi la carta
                cardDisplay.classList.add('hidden');
                gameState.cardRevealed = false;
                btnViewCard.classList.remove('hidden');
                btnNext.classList.remove('show');
            }
        }

        function nextPlayer() {
            const btnNext = document.getElementById('btnNext');
            const cardDisplay = document.getElementById('cardDisplay');
            const btnViewCard = document.getElementById('btnViewCard');
            const endGameSection = document.getElementById('endGameSection');

            // Reset per il prossimo giocatore
            gameState.currentPlayer++;
            gameState.cardRevealed = false;

            if (gameState.currentPlayer >= gameState.numPlayers) {
                // Fine del giro - mostra la sezione finale
                cardDisplay.classList.add('hidden');
                btnViewCard.style.display = 'none';
                btnViewCard.classList.remove('hidden');
                btnNext.classList.remove('show');
                endGameSection.classList.add('show');
                return;
            }

            cardDisplay.classList.add('hidden');
            btnViewCard.classList.remove('hidden');
            btnNext.classList.remove('show');

            updateUI();
        }

        function checkPassword() {
            const passwordReveal = document.getElementById('passwordReveal');
            const btnCheckPassword = document.getElementById('btnCheckPassword');
            const btnHidePassword = document.getElementById('btnHidePassword');

            passwordReveal.innerHTML = '<div class="password-reveal">La parola vera √®:<br>' + gameState.truePassword + '</div>';
            gameState.passwordRevealed = true;
            btnCheckPassword.classList.add('hidden');
            btnHidePassword.classList.add('show');
        }

        function hidePassword() {
            const passwordReveal = document.getElementById('passwordReveal');
            const btnCheckPassword = document.getElementById('btnCheckPassword');
            const btnHidePassword = document.getElementById('btnHidePassword');

            passwordReveal.innerHTML = '';
            gameState.passwordRevealed = false;
            btnCheckPassword.classList.remove('hidden');
            btnHidePassword.classList.remove('show');
        }

        function updateUI() {
            const roundCounter = document.getElementById('roundCounter');
            const gameStats = document.getElementById('gameStats');

            // Aggiorna il contatore del giro
            roundCounter.textContent = `Giocatore ${gameState.currentPlayer + 1} di ${gameState.numPlayers}`;

            // Aggiorna le statistiche
            const config = gameConfig[gameState.numPlayers];
            gameStats.innerHTML = `
                <p><strong>Configurazione Partita:</strong></p>
                <p>Discepoli: ${config.discepoli}</p>
                <p>Infiltrati: ${config.infiltrati}</p>
                <p>Giornalisti: ${config.giornalisti}</p>
            `;
        }

        function resetGame() {
            gameState = {
                numPlayers: 0,
                cards: [],
                currentPlayer: 0,
                selectedWordPair: null,
                cardRevealed: false,
                truePassword: null,
                passwordRevealed: false
            };

            document.getElementById('setupSection').style.display = 'flex';
            document.getElementById('gameSection').classList.remove('active');
            document.getElementById('endGameSection').classList.remove('show');
            document.getElementById('numPlayers').value = 5;
            document.getElementById('errorMessage').innerHTML = '';
            document.getElementById('passwordReveal').innerHTML = '';

            const cardDisplay = document.getElementById('cardDisplay');
            const btnViewCard = document.getElementById('btnViewCard');
            const btnCheckPassword = document.getElementById('btnCheckPassword');
            const btnHidePassword = document.getElementById('btnHidePassword');

            cardDisplay.classList.add('hidden');
            btnViewCard.style.display = 'block';
            btnViewCard.classList.remove('hidden');
            btnCheckPassword.classList.remove('hidden');
            btnHidePassword.classList.remove('show');
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.innerHTML = '<div class="error-message">' + message + '</div>';
            setTimeout(() => {
                errorDiv.innerHTML = '';
            }, 3000);
        }
    </script>
</body>
</html>